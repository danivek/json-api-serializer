!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).JSONAPISerializer=t()}(this,(function(){"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function n(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var u="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};!function(e,t){if(!e.setImmediate){var r,n,i,o,a,s=1,c={},u=!1,l=e.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(e);f=f&&f.setTimeout?f:e,"[object process]"==={}.toString.call(e.process)?r=function(e){process.nextTick((function(){h(e)}))}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,r=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=r,t}}()?e.MessageChannel?((i=new MessageChannel).port1.onmessage=function(e){h(e.data)},r=function(e){i.port2.postMessage(e)}):l&&"onreadystatechange"in l.createElement("script")?(n=l.documentElement,r=function(e){var t=l.createElement("script");t.onreadystatechange=function(){h(e),t.onreadystatechange=null,n.removeChild(t),t=null},n.appendChild(t)}):r=function(e){setTimeout(h,0,e)}:(o="setImmediate$"+Math.random()+"$",a=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(o)&&h(+t.data.slice(o.length))},e.addEventListener?e.addEventListener("message",a,!1):e.attachEvent("onmessage",a),r=function(t){e.postMessage(o+t,"*")}),f.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var i={callback:e,args:t};return c[s]=i,r(s),s++},f.clearImmediate=p}function p(e){delete c[e]}function h(e){if(u)setTimeout(h,0,e);else{var t=c[e];if(t){u=!0;try{!function(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(void 0,r)}}(t)}finally{p(e),u=!1}}}}}("undefined"==typeof self?u:self);var l=function e(r,n){t(this,e),this.key=r,this.data=n,this.previous=null,this.next=null},f={get:function(e,t,r){var n=String.prototype.split.call(t,/[,[\].]+?/).filter(Boolean).reduce((function(e,t){return null!=e?e[t]:e}),e);return void 0===n||n===e?r:n},set:function(e,t,r){return Object(e)!==e||(Array.isArray(t)||(t=t.toString().match(/[^.[\]]+/g)||[]),t.slice(0,-1).reduce((function(e,r,n){return Object(e[r])===e[r]?e[r]:e[r]=Math.abs(t[n+1])>>0==+t[n+1]?[]:{}}),e)[t[t.length-1]]=r),e},pick:function(e,t){return t.reduce((function(t,r){return r in e&&(t[r]=e[r]),t}),{})},isEmpty:function(e){return null==e||!(Object.keys(e)||e).length},omit:function(e,t){return Object.keys(e).filter((function(e){return!t.includes(e)})).reduce((function(t,r){return t[r]=e[r],t}),{})},isPlainObject:function(t){return!!t&&"object"===e(t)&&t.constructor===Object},isObjectLike:function(t){return null!==t&&"object"===e(t)},transform:function(e,t,r){return Object.keys(e).reduce((function(r,n){return t(r,e[n],n,e)}),r)},toKebabCase:function(e){return e&&e.match(/[A-Z]{2,}(?=[A-Z][a-z]+[0-9]*|\b)|[A-Z]?[a-z]+[0-9]*|[A-Z]|[0-9]+/g).map((function(e){return e.toLowerCase()})).join("-")},toSnakeCase:function(e){return e&&e.match(/[A-Z]{2,}(?=[A-Z][a-z]+[0-9]*|\b)|[A-Z]?[a-z]+[0-9]*|[A-Z]|[0-9]+/g).map((function(e){return e.toLowerCase()})).join("_")},toCamelCase:function(e){var t=e&&e.match(/[A-Z]{2,}(?=[A-Z][a-z]+[0-9]*|\b)|[A-Z]?[a-z]+[0-9]*|[A-Z]|[0-9]+/g).map((function(e){return e.slice(0,1).toUpperCase()+e.slice(1).toLowerCase()})).join("");return t.slice(0,1).toLowerCase()+t.slice(1)},LRU:function(){function e(r){t(this,e),this.capacity=0===r?1/0:r,this.map={},this.head=null,this.tail=null}return n(e,[{key:"get",value:function(e){if(void 0!==this.map[e]){var t=this.map[e];return this._moveFirst(t),t.data}}},{key:"set",value:function(e,t){if(void 0!==this.map[e]){var r=this.map[e];return r.data=t,void this._moveFirst(r)}if(Object.keys(this.map).length>=this.capacity){var n=this.tail.key;this._removeLast(),delete this.map[n]}var i=new l(e,t);this._add(i),this.map[e]=i}},{key:"_add",value:function(e){e.next=null,e.previous=e.next,null===this.head?(this.head=e,this.tail=e):(this.head.previous=e,e.next=this.head,this.head=e)}},{key:"_remove",value:function(e){return this.head===e&&this.tail===e?(this.tail=null,void(this.head=this.tail)):this.head===e?(this.head.next.previous=null,void(this.head=this.head.next)):this.tail===e?(this.tail.previous.next=null,void(this.tail=this.tail.previous)):(e.previous.next=e.next,void(e.next.previous=e.previous))}},{key:"_moveFirst",value:function(e){this._remove(e),this._add(e)}},{key:"_removeLast",value:function(){this._remove(this.tail)}}]),e}()};var p=f.pick,h=f.isEmpty,y=f.omit,d=f.isPlainObject,v=f.isObjectLike,b=f.transform,m=f.get,w=f.set,g=f.toCamelCase,k=f.toKebabCase,j=f.toSnakeCase,O=f.LRU,E=function(t){if(t=a({id:"id",blacklist:[],whitelist:[],links:{},relationships:{},topLevelLinks:{},topLevelMeta:{},meta:{},blacklistOnDeserialize:[],whitelistOnDeserialize:[],jsonapiObject:!0},t),!Array.isArray(t.blacklist))throw new Error("option 'blacklist' must be an array");if(!Array.isArray(t.whitelist))throw new Error("option 'whitelist' must be an array");if("object"!==e(t.links)&&"function"!=typeof t.links)throw new Error("option 'links' must be an object or a function");if(!Array.isArray(t.blacklistOnDeserialize))throw new Error("option 'blacklistOnDeserialize' must be an array");if(!Array.isArray(t.whitelistOnDeserialize))throw new Error("option 'whitelistOnDeserialize' must be an array");if(t.topLevelLinks&&"object"!==e(t.topLevelLinks)&&"function"!=typeof t.topLevelLinks)throw new Error("option 'topLevelLinks' must be an object or a function");if(t.topLevelMeta&&"object"!==e(t.topLevelMeta)&&"function"!=typeof t.topLevelMeta)throw new Error("option 'topLevelMeta' must be an object or a function");if(t.meta&&"object"!==e(t.meta)&&"function"!=typeof t.meta)throw new Error("option 'meta' must be an object or a function");if("boolean"!=typeof t.jsonapiObject)throw new Error("option 'jsonapiObject' must a boolean");if(t.convertCase&&!["kebab-case","snake_case","camelCase"].includes(t.convertCase))throw new Error("option 'convertCase' must be one of 'kebab-case', 'snake_case', 'camelCase'");if(t.unconvertCase&&!["kebab-case","snake_case","camelCase"].includes(t.unconvertCase))throw new Error("option 'unconvertCase' must be one of 'kebab-case', 'snake_case', 'camelCase'");if(t.beforeSerialize&&"function"!=typeof t.beforeSerialize)throw new Error("option 'beforeSerialize' must be function");if(t.afterDeserialize&&"function"!=typeof t.afterDeserialize)throw new Error("option 'afterDeserialize' must be function");var r=t.relationships;return Object.keys(r).forEach((function(t){if(r[t]=a({schema:"default",links:{},meta:{}},r[t]),!r[t].type)throw new Error("option 'type' for relationship '".concat(t,"' is required"));if("string"!=typeof r[t].type&&"function"!=typeof r[t].type)throw new Error("option 'type' for relationship '".concat(t,"' must be a string or a function"));if(r[t].alternativeKey&&"string"!=typeof r[t].alternativeKey)throw new Error("option 'alternativeKey' for relationship '".concat(t,"' must be a string"));if(r[t].schema&&"string"!=typeof r[t].schema)throw new Error("option 'schema' for relationship '".concat(t,"' must be a string"));if("object"!==e(r[t].links)&&"function"!=typeof r[t].links)throw new Error("option 'links' for relationship '".concat(t,"' must be an object or a function"));if("object"!==e(r[t].meta)&&"function"!=typeof r[t].meta)throw new Error("option 'meta' for relationship '".concat(t,"' must be an object or a function"));if(r[t].deserialize&&"function"!=typeof r[t].deserialize)throw new Error("option 'deserialize' for relationship '".concat(t,"' must be a function"))})),t},A=function(t){if(!(t=a({topLevelLinks:{},topLevelMeta:{},jsonapiObject:!0},t)).type)throw new Error("option 'type' is required");if("string"!=typeof t.type&&"function"!=typeof t.type)throw new Error("option 'type' must be a string or a function");if(t.topLevelLinks&&"object"!==e(t.topLevelLinks)&&"function"!=typeof t.topLevelLinks)throw new Error("option 'topLevelLinks' must be an object or a function");if(t.topLevelMeta&&"object"!==e(t.topLevelMeta)&&"function"!=typeof t.topLevelMeta)throw new Error("option 'topLevelMeta' must be an object or a function");if(t.meta&&"object"!==e(t.meta)&&"function"!=typeof t.meta)throw new Error("option 'meta' must be an object or a function");if("boolean"!=typeof t.jsonapiObject)throw new Error("option 'jsonapiObject' must a boolean");return t},C=function(t){if("object"!==e(t))throw new Error("error must be an object");var r=t.id,n=t.links,i=t.status,o=t.code,a=t.title,s=t.detail,c=t.source,u=t.meta,l={};return r&&(l.id=r.toString()),n&&(l.links=function(t){if("object"!==e(t))throw new Error("error 'link' property must be an object");return Object.keys(t).forEach((function(r){if("object"!==e(t[r])&&"string"!=typeof t[r])throw new Error("error 'links.".concat(r,"' must be a string or an object"));if("object"===e(t[r])){if(t[r].href&&"string"!=typeof t[r].href)throw new Error("'links.".concat(r,".href' property must be a string"));if(t[r].meta&&"object"!==e(t[r].meta))throw new Error("'links.".concat(r,".meta' property must be an object"))}})),n}(n)),i&&(l.status=i.toString()),o&&(l.code=o.toString()),a&&(l.title=a.toString()),s&&(l.detail=s.toString()),c&&(l.source=function(t){if("object"!==e(t))throw new Error("error 'source' property must be an object");if(t.pointer&&"string"!=typeof t.pointer)throw new Error("error 'source.pointer' property must be a string");if(t.parameter&&"string"!=typeof t.parameter)throw new Error("error 'source.parameter' property must be a string");return c}(c)),u&&(l.meta=u),l};return function(){function r(e){t(this,r),this.opts=e||{},this.schemas={};var n=this.opts.convertCaseCacheSize,i=void 0===n?5e3:n;this.convertCaseMap={camelCase:new O(i),kebabCase:new O(i),snakeCase:new O(i)}}return n(r,[{key:"register",value:function(t,r,n){"object"===e(r)&&(n=r,r="default"),r=r||"default",n=a(a({},this.opts),n),this.schemas[t]=this.schemas[t]||{},this.schemas[t][r]=E(n)}},{key:"serialize",value:function(t,r,n,i,o){var c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};3===arguments.length&&"object"===e(n)&&(i=n,n="default"),n=n||"default",i=i||{};var u,l=new Map,f="object"===e(t);if(f)u=A(t);else{if(!this.schemas[t])throw new Error("No type registered for ".concat(t));if(n&&!this.schemas[t][n])throw new Error("No schema ".concat(n," registered for ").concat(t));u=this.schemas[t][n]}var p,h=f?t.type:t;return c[h]&&(u=a(a({},u),c[h])),p=o?void 0:f?this.serializeMixedResource(u,r,l,i,c):this.serializeResource(t,r,u,l,i,c),{jsonapi:u.jsonapiObject?{version:"1.0"}:void 0,meta:this.processOptionsValues(r,i,u.topLevelMeta,"extraData"),links:this.processOptionsValues(r,i,u.topLevelLinks,"extraData"),data:p,included:l.size?s(l.values()):void 0}}},{key:"serializeAsync",value:function(t,r,n,i,o){var c=this,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};3===arguments.length&&"object"===e(n)&&(i=n,n="default"),n=n||"default",i=i||{};var l,f=new Map,p=Array.isArray(r),h="object"===e(t),y=p?r:[r],d=[],v=this,b=0;if(h)l=A(t);else{if(!this.schemas[t])throw new Error("No type registered for ".concat(t));if(n&&!this.schemas[t][n])throw new Error("No schema ".concat(n," registered for ").concat(t));l=this.schemas[t][n]}var m=h?t.type:t;return u[m]&&(l=a(a({},l),u[m])),new Promise((function(e,r){!function n(){setImmediate((function(){if(o)return e();if(b>=y.length)return e(d);try{var a=h?v.serializeMixedResource(t,y[b],f,i,u):v.serializeResource(t,y[b],l,f,i,u);return null!==a&&d.push(a),b+=1,n()}catch(e){return r(e)}}))}()})).then((function(e){var t;return t=void 0===e?void 0:p?e:e[0]||null,{jsonapi:l.jsonapiObject?{version:"1.0"}:void 0,meta:c.processOptionsValues(r,i,l.topLevelMeta,"extraData"),links:c.processOptionsValues(r,i,l.topLevelLinks,"extraData"),data:t,included:f.size?s(f.values()):void 0}}))}},{key:"deserialize",value:function(t,r,n){var i=this;if(n=n||"default","object"===e(t))t=A(t);else{if(!this.schemas[t])throw new Error("No type registered for ".concat(t));if(n&&!this.schemas[t][n])throw new Error("No schema ".concat(n," registered for ").concat(t))}var o={};return r.data&&(o=Array.isArray(r.data)?r.data.map((function(e){return i.deserializeResource(t,e,n,r.included)})):this.deserializeResource(t,r.data,n,r.included)),o}},{key:"deserializeAsync",value:function(t,r,n){if(n=n||"default","object"===e(t))t=A(t);else{if(!this.schemas[t])throw new Error("No type registered for ".concat(t));if(n&&!this.schemas[t][n])throw new Error("No schema ".concat(n," registered for ").concat(t))}var i=Array.isArray(r.data),o=0,a=i?r.data:[r.data],s=[],c=this;return new Promise((function(e,u){!function l(){setImmediate((function(){if(o>=a.length)return e(i?s:s[0]);try{var f=c.deserializeResource(t,a[o],n,r.included);return s.push(f),o+=1,l()}catch(e){return u(e)}}))}()}))}},{key:"serializeError",value:function(e){function t(e){var t;if(e instanceof Error){var r=e.status||e.statusCode;t={status:r&&r.toString(),code:e.code,title:e.title||e.constructor.name,detail:e.message}}else t=C(e);return t}return{errors:Array.isArray(e)?e.map((function(e){return t(e)})):[t(e)]}}},{key:"deserializeResource",value:function(t,r){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"default",o=arguments.length>3?arguments[3]:void 0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];if("object"===e(t)&&(t="function"==typeof t.type?t.type(r):m(r,t.type)),!t)throw new Error("No type can be resolved from data: ".concat(JSON.stringify(r)));if(!this.schemas[t])throw new Error("No type registered for ".concat(t));var c=this.schemas[t][i],u={};return u[c.id]=r.id||void 0,r.attributes&&c.whitelistOnDeserialize.length&&(r.attributes=p(r.attributes,c.whitelistOnDeserialize)),r.attributes&&c.blacklistOnDeserialize.length&&(r.attributes=y(r.attributes,c.blacklistOnDeserialize)),Object.assign(u,r.attributes),r.relationships&&Object.keys(r.relationships).forEach((function(e){var t=r.relationships[e],i=c.unconvertCase?n._convertCase(e,c.unconvertCase):e,l=c.relationships[i],f=function(e){return l&&l.deserialize?l.deserialize(e):e.id};if(void 0!==t.data)if(null===t.data)w(u,l&&l.alternativeKey||i,null);else if((l&&l.alternativeKey||!o)&&w(u,l&&l.alternativeKey||i,Array.isArray(t.data)?t.data.map((function(e){return f(e)})):f(t.data)),o){var p=function(e){var t=s(a),r="".concat(e.type,"-").concat(e.id);return t.includes(r)?f(e):(t.push(r),n.deserializeIncluded(e.type,e.id,l,o,t))};w(u,i,Array.isArray(t.data)?t.data.map((function(e){return p(e)})):p(t.data))}})),c.unconvertCase&&(u=this._convertCase(u,c.unconvertCase)),r.links&&(u.links=r.links),r.meta&&(u.meta=r.meta),c.afterDeserialize?c.afterDeserialize(u):u}},{key:"deserializeIncluded",value:function(e,t,r,n,i){var o=n.find((function(r){return r.type===e&&r.id===t}));return o?this.deserializeResource(e,o,r.schema,n,i):t}},{key:"serializeResource",value:function(e,t,r,n,i){var o=this,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};return h(t)?Array.isArray(t)?t:null:Array.isArray(t)?t.map((function(t){return o.serializeResource(e,t,r,n,i,a)})):(r.beforeSerialize&&(t=r.beforeSerialize(t)),{type:e,id:t[r.id]?t[r.id].toString():void 0,attributes:this.serializeAttributes(t,r),relationships:this.serializeRelationships(t,r,n,i,a),meta:this.processOptionsValues(t,i,r.meta),links:this.processOptionsValues(t,i,r.links)})}},{key:"serializeMixedResource",value:function(e,t,r,n){var i=this,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};if(h(t))return Array.isArray(t)?t:null;if(Array.isArray(t))return t.map((function(t){return i.serializeMixedResource(e,t,r,n,o)}));var s="function"==typeof e.type?e.type(t):m(t,e.type);if(!s)throw new Error("No type can be resolved from data: ".concat(JSON.stringify(t)));if(!this.schemas[s])throw new Error("No type registered for ".concat(s));var c=this.schemas[s].default;return o[s]&&(c=a(a({},c),o[s])),this.serializeResource(s,t,c,r,n,o)}},{key:"serializeAttributes",value:function(e,t){t.whitelist&&t.whitelist.length&&(e=p(e,t.whitelist));var r=[];Object.keys(t.relationships).forEach((function(e){var n=t.relationships[e];n.alternativeKey&&r.push(n.alternativeKey)}));var n=y(e,[t.id].concat(s(Object.keys(t.relationships)),r,s(t.blacklist)));return t.convertCase&&(n=this._convertCase(n,t.convertCase)),Object.keys(n).length?n:void 0}},{key:"serializeRelationships",value:function(e,t,r,n){var i=this,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},a={};return Object.keys(t.relationships).forEach((function(s){var c=t.relationships[s],u=s;!e[s]&&c.alternativeKey&&(u=c.alternativeKey);var l={links:i.processOptionsValues(e,n,c.links),meta:i.processOptionsValues(e,n,c.meta),data:i.serializeRelationship(c.type,c.schema,m(e,u),r,e,n,o)};void 0===l.data&&void 0===l.links&&void 0===l.meta||(s=t.convertCase?i._convertCase(s,t.convertCase):s,a[s]=l)})),Object.keys(a).length?a:void 0}},{key:"serializeRelationship",value:function(t,r,n,i,o,s){var c=this,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{};i=i||new Map;var l=r||"default";if(null==n)return n;if("object"===e(n)&&h(n))return Array.isArray(n)?[]:null;if(Array.isArray(n))return n.map((function(e){return c.serializeRelationship(t,l,e,i,o,s,u)}));var f="function"==typeof t?t(n,o):t;if(!f)throw new Error("No type can be resolved from relationship's data: ".concat(JSON.stringify(n)));if(!this.schemas[f])throw new Error('No type registered for "'.concat(f,'"'));if(!this.schemas[f][l])throw new Error('No schema "'.concat(l,'" registered for type "').concat(f,'"'));var p=this.schemas[f][l];u[f]&&(p=a(a({},p),u[f]));var y={type:f};if(v(n)){var d=this.serializeResource(f,n,p,i,s,u);y.id=d.id;var b="".concat(f,"-").concat(y.id);if(d.attributes&&Object.keys(d.attributes).length)if(i.has(b)){var m=i.get(b);d.relationships&&(m.relationships=a(a({},m.relationships),d.relationships),i.set(b,m))}else i.set(b,d)}else y.id=n.toString();return y}},{key:"processOptionsValues",value:function(e,t,r,n){var o={};return r&&"function"==typeof r?o="extraData"===n&&1===r.length?r(t):r(e,t):Object.keys(r).forEach((function(a){var s={};s=r[a]&&"function"==typeof r[a]?"extraData"===n&&1===r[a].length?r[a](t):r[a](e,t):r[a],Object.assign(o,i({},a,s))})),o&&Object.keys(o).length?o:void 0}},{key:"_convertCase",value:function(e,t){var r=this;if(Array.isArray(e))return e.map((function(e){return e&&(Array.isArray(e)||d(e))?r._convertCase(e,t):e}));if(d(e))return b(e,(function(e,n,i){var o;return o=n&&(Array.isArray(n)||d(n))?r._convertCase(n,t):n,e[r._convertCase(i,t)]=o,e}),{});if("string"==typeof e){var n;switch(t){case"snake_case":(n=this.convertCaseMap.snakeCase.get(e))||(n=j(e),this.convertCaseMap.snakeCase.set(e,n));break;case"kebab-case":(n=this.convertCaseMap.kebabCase.get(e))||(n=k(e),this.convertCaseMap.kebabCase.set(e,n));break;case"camelCase":(n=this.convertCaseMap.camelCase.get(e))||(n=g(e),this.convertCaseMap.camelCase.set(e,n))}return n}return e}}]),r}()}));
//# sourceMappingURL=json-api-serializer.min.js.map
